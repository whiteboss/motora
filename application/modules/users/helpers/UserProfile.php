<?php/** *  * Профиль пользователя * */class Users_Helper_UserProfile extends Zend_Controller_Action_Helper_Abstract{    protected $view;    /**     * Возвращает данные о пользователе и передает из в объект вида     * @param int $id идентификатор пользователя     * @return Application_Model_User     */    public function getUser($id)    {        $table = new Application_Model_Table_Users();        $items = $table->find($id);        if (count($items) > 0) {            return $items->current();        } else {            $redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('Redirector');                     $redirector->gotoUrl('/peoples');            //throw new Exception('Desconocido identificador пользователя');        }    }    /**     * Возвращает текущий объект вида     * @return Zend_View     */    public function getView()    {        if (null !== $this->view) {            return $this->view;        }        $controller = $this->getActionController();        $view = $controller->view;        if (!$view instanceof Zend_View_Abstract) {            return;        }        $this->view = $view;        return $view;    }    /**     * @param int $id идентификатор пользователя     * @return Application_Model_User     */    public function direct($id)    {        if ($this->getRequest()->getControllerName() == "index")            $this->getView()->active = $this->getRequest()->getActionName();        else            $this->getView()->active = $this->getRequest()->getControllerName();                $this->getView()->user = $this->getUser($id);        return $this->getView()->user;    }}